<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Ecolite · Dashboard de encuestas internas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta
    name="description"
    content="Panel ejecutivo de resultados de la encuesta interna de áreas Ecolite. Visualiza nivel global, distribución de calificaciones, indicadores clave e insights con comentarios filtrables."
  />
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-content">
      <div>
        <div class="logo">Ecolite</div>
        <p class="tagline">Panel de resultados de la encuesta interna</p>
      </div>
      <div class="header-actions">
        <a href="/" class="btn btn-outline">Ver encuesta</a>
      </div>
    </div>
  </header>

  <main class="dashboard-main">
    <!-- KPIs -->
    <section class="container dashboard-kpis">
      <div class="kpi-card">
        <p class="kpi-label">Respuestas totales</p>
        <p class="kpi-value" id="total-responses">0</p>
        <p class="kpi-sub">Personas que han completado la encuesta.</p>
      </div>

      <div class="kpi-card">
        <p class="kpi-label">Nivel global de evaluación</p>
        <p class="kpi-value" id="global-average">-</p>
        <p class="kpi-sub">
          Resultado consolidado de todas las calificaciones (escala 1 a 4).
        </p>
      </div>

      <div class="kpi-card">
        <p class="kpi-label">Última actividad</p>
        <p class="kpi-value kpi-small" id="latest-response-date">Sin datos</p>
        <p class="kpi-sub">
          <button id="reload-btn" class="btn btn-outline small">Actualizar datos</button>
        </p>
      </div>
    </section>

    <!-- Gráficas / Indicadores principales -->
    <section class="container dashboard-grid">
      <!-- Distribución global -->
      <div class="dashboard-panel">
        <div class="panel-header">
          <h2>Distribución global de calificaciones</h2>
          <p class="panel-subtitle">
            Cómo se reparten los valores 1 a 4 en todas las respuestas.
          </p>
        </div>
        <canvas id="globalDistChart"></canvas>
      </div>

      <!-- Indicadores de satisfacción -->
      <div class="dashboard-panel">
        <div class="panel-header">
          <h2>Indicadores de satisfacción</h2>
          <p class="panel-subtitle">
            Indicadores clave construidos a partir de todas las respuestas registradas.
          </p>
        </div>

        <div class="insights-grid">
          <div class="insight-card">
            <p class="insight-label">Zona crítica (1 y 2)</p>
            <p class="insight-value" id="critical-percentage">-</p>
            <p class="insight-sub">
              Porcentaje de respuestas en niveles 1 y 2.
            </p>
          </div>
          <div class="insight-card">
            <p class="insight-label">Zona positiva (3 y 4)</p>
            <p class="insight-value" id="positive-percentage">-</p>
            <p class="insight-sub">
              Porcentaje de respuestas en niveles 3 y 4.
            </p>
          </div>
          <div class="insight-card">
            <p class="insight-label">Índice global</p>
            <p class="insight-value" id="satisfaction-index">-</p>
            <p class="insight-sub">
              Equivalente al promedio global expresado sobre 100%.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Insights ejecutivos por área -->
    <section class="container dashboard-panel">
      <div class="panel-header">
        <h2>Insights por área</h2>
        <p class="panel-subtitle">
          Resumen automático de las áreas mejor valoradas, con más oportunidades y con mayor volumen de respuestas.
        </p>
      </div>

      <div class="insights-grid">
        <div class="insight-card">
          <p class="insight-label">Área mejor valorada</p>
          <p class="insight-value" id="best-area-name">-</p>
          <p class="insight-sub" id="best-area-score">
            Aún no hay suficientes respuestas.
          </p>
        </div>
        <div class="insight-card">
          <p class="insight-label">Área con más oportunidades</p>
          <p class="insight-value" id="worst-area-name">-</p>
          <p class="insight-sub" id="worst-area-score">
            Aún no hay suficientes respuestas.
          </p>
        </div>
        <div class="insight-card">
          <p class="insight-label">Área con más respuestas</p>
          <p class="insight-value" id="most-answers-area-name">-</p>
          <p class="insight-sub" id="most-answers-area-count">
            Aún no hay suficientes respuestas.
          </p>
        </div>
      </div>
    </section>

    <!-- Comentarios abiertos -->
    <section class="container dashboard-panel">
      <div class="panel-header">
        <h2>Comentarios abiertos</h2>
        <p class="panel-subtitle">
          Sugerencias y observaciones cualitativas por área. Cruza estos comentarios con los resultados numéricos para definir planes de acción.
        </p>
      </div>

      <!-- Filtros de comentarios -->
      <div class="comments-toolbar">
        <div class="comments-filters">
          <label for="comments-area-filter">Filtrar por área:</label>
          <select id="comments-area-filter">
            <option value="all">Todas las áreas</option>
            <option value="comercial">Comercial</option>
            <option value="marketing">Marketing</option>
            <option value="finanzas">Finanzas / Contabilidad</option>
            <option value="logistica">Logística</option>
            <option value="compras">Compras</option>
            <option value="rrhh">Recursos Humanos</option>
            <option value="creditocartera">Crédito y Cartera</option>
            <option value="garantias">Garantías</option>
          </select>
        </div>

        <div class="comments-search">
          <input
            type="search"
            id="comments-search"
            placeholder="Buscar por texto o tema (ej. tiempos, comunicación, soporte)…"
          />
        </div>
      </div>

      <!-- Resumen por área -->
      <div id="comments-summary" class="comments-summary"></div>

      <!-- Listado de comentarios -->
      <div id="comments-list" class="comment-list">
        <!-- Se rellena por JS -->
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-content">
      <p>© 2025 Ecolite Corp — Panel interno de resultados.</p>
      <p class="footer-note">Uso exclusivo interno · Datos confidenciales.</p>
    </div>
  </footer>

  <!-- Chart.js desde CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- JS del dashboard -->
  <script src="/static/dashboard.js"></script>
</body>
</html>
